!function(e){function t(){var t=this;this.el=null,this.loading=!0,this.options={},this.rq=!1;var n=1;this.refresh=function(){t.rq&&t.rq.abort(),t.render()},this.render=function(n){e(t.el).addClass("e-table-box");var o=e('<div class="e-table-loading">Cargando...</div>').appendTo(t.el);if(1==e(t.el).find(".e-table").length){var s=e(t.el).find(".e-table").first();e(o).css("background-color","rgba(64, 128, 255, 0.8)"),e(o).css("color","#fff"),e(o).css("margin-left",(e(t.el).width()-e(s).width())/2),e(o).css("width",e(s).width()+2),e(o).css("line-height",e(s).height()+2+"px"),e(o).css("top",0)}t.options.Pagination&&(t.options.PageSize=t.options.PageSize?t.options.PageSize:10);var i=t.options.Url;t.options.UrlExtra&&(i+=window[t.options.UrlExtra]()),t.rq=e.ajax({dataType:"json",url:i}).done(function(n){n&&(t.options.Rows=n,a(),e(o).remove(),t.rq=!1)}).error(function(n,a,s){"abort"!=a&&"timeout"!=a&&alert("Error: "+a+" - "+s),e(o).remove(),t.rq=!1,"timeout"==a&&t.refresh()})};var a=function(){var o,s,i,r,d,l,c=null;e(t.el).find("table").first().remove(),o=e('<table class="e-table">').appendTo(t.el),t.options.Classes&&e(o).addClass(t.options.Classes),e(o).css("width",t.options.Width?t.options.Width:"auto"),t.options.MinWidth&&e(o).css("min-width",t.options.MinWidth),e(o).css("margin","0 auto"),s=e("<thead>").appendTo(o),d=e("<tr>").appendTo(s),jQuery.each(t.options.Columns,function(t,n){header=e("<th>").appendTo(d),header.append(n.Title)}),t.options.Buttons&&(header=e("<th>").appendTo(d),header.append("Opciones")),i=e("<tbody>").appendTo(o);var p=0,u=0;if(jQuery.each(t.options.Rows,function(a,o){if(p++,!t.options.Pagination||a>=t.options.PageSize*n-t.options.PageSize&&a<t.options.PageSize*n){d=e("<tr>").appendTo(i),jQuery.each(t.options.Columns,function(t,n){var a=n.Id?n.Id:n.Name;c=e('<td data-name="'+a+'">').appendTo(d);var s=n.Name.split(".");if(1==s.length)e(c).append(o[n.Name]);else{var i=s.length,r=o[s[0]];r&&jQuery.each(s,function(t,n){0!=t&&(t==i-1?e(c).append(r[s[t]]):r=r[n])})}});var s="undefined"!=typeof t.options.Buttons;s&&(c=e('<td class="row-functions">').appendTo(d),jQuery.each(t.options.Buttons,function(t,n){var a=e('<div class="e-button">').appendTo(c);e(a).click(function(){window[n.Action](o,e(this).parent().parent())}),n.Classes&&e(a).addClass(n.Classes),n.Text&&(n.Icon&&(n.Text=" "+n.Text),e(a).append(n.Text)),n.Icon&&e(a).prepend('<i class="fa fa-'+n.Icon+'"></i>')})),t.options.OnRowDrawed&&window[t.options.OnRowDrawed](d[0],o)}}),u=e(d).children().length,t.options.Pagination&&t.options.PageSize-p>0&&(d=e('<tr style="height:'+50*(t.options.PageSize-p)+'px">').appendTo(i),cell=e('<td colspan="'+u+'">').appendTo(d)),t.options.Pagination){var h=t.options.Buttons?t.options.Columns.length+1:t.options.Columns.length;r=e("<tfoot>").appendTo(o),d=e("<tr>").appendTo(r),l=e('<th colspan="'+h+'" style="text-align:center">').appendTo(d);for(var v=e('<div class="fa fa-arrow-circle-left">').appendTo(l),w=Math.ceil(0!=t.options.Rows.length?t.options.Rows.length/t.options.PageSize:1),f=1;w>=f;f++){var g=null;g=n==f?e('<span class="e-page e-active">'+f+"</span>").appendTo(l):e('<span class="e-page">'+f+"</span>").appendTo(l),e(g).on("click",function(){var t=e(this).text();t!=n&&(n=t,a())})}var m=e('<div class="fa fa-arrow-circle-right">').appendTo(l);1==n&&e(v).addClass("e-disabled"),n==w&&e(m).addClass("e-disabled"),e(v).on("click",function(){1!=n&&(n--,a())}),e(m).on("click",function(){n!=w&&(n++,a())})}}}var n=null,a=function(t){var n=t.attr("data-index"),a=t.closest(".e-menu").find(".e-menu-tabs-content .e-item[data-index='"+n+"']"),o=e(t).attr("data-url");"undefined"!=typeof o&&o!==!1&&(e(a).html("Cargando. Espere..."),e.ajax({crossOrigin:!0,url:o,success:function(t){e(a).html(t)}}))},o=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return 10>t&&(t="0"+t),10>n&&(n="0"+n),t+"/"+n+"/"+a},s=function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),a=e.getSeconds();return 10>t&&(t="0"+t),10>n&&(n="0"+n),10>a&&(a="0"+a),t+":"+n+":"+a},i=function(e){return 10>e?"0"+e:e};e.extend({evy:function(){var t=function(){e.each(e(".e-menu"),function(t,n){(e(n).hasClass("e-menu-bar")||e(n).hasClass("e-menu-bar-xl")||e(n).hasClass("e-menu-bar-sm")||e(n).hasClass("e-menu-bar-md")||e(n).hasClass("e-menu-bar-lg"))&&e(n).menuBar(),e(n).hasClass("e-menu-tab")&&e(n).menuTab()})};return t(),this},openWindow:function(t){if(t||(t={}),t.Url){var n=e("<div>").appendTo("body"),a=e('<div class="e-overlay">').insertBefore(n);t.Name&&e(n).attr("id",t.Name);var o=e('<div class="e-window-content">').appendTo(n);e.showWait(),e(o).load(t.Url,function(){t.OnLoad&&window[t.OnLoad]();var s=document.title;t.State&&(window.history.pushState({path:t.State.NewUrl},"",t.State.NewUrl),document.title=t.State.Title),t.Class&&e(n).addClass(t.Class);var i=e('<div class="e-window-header">').prependTo(n);if(t.ClassHeader&&e(i).addClass(t.ClassHeader),t.Title){var r=e('<div class="e-window-title">').appendTo(i);e(r).html(t.Title)}var d=e('<div class="e-window-options">').appendTo(i),l=e('<div class="e-window-close">').appendTo(d);e(l).append('<i class="fa fa-close"><i>'),e("html").css("overflow-y","hidden"),e(n).on("click",".e-window-header .e-window-close",function(){t.OnClose&&window[t.OnClose](),document.body.style.overflow="",e(a).remove(),e(n).remove(),t.State&&(window.history.back(),document.title=s),e("html").css("overflow-y","auto")}),e.closeWait(),e(n).addClass("e-window"),t.FullScreen&&(t.MinWidth=String(e(window).width()),t.MinHeight=String(e(window).height()));var c=t.MinWidth?t.MinWidth:0;0!=c&&e(window).outerWidth(!1)>=Number(c.replace("px","").replace("%",""))&&e(n).css("min-width",c+"px");var p=t.MinHeight?t.MinHeight:0;0!=p&&e(window).outerHeight(!1)>=Number(p.replace("px","").replace("%",""))&&e(n).css("min-height",p+"px");var u=(t.Width?t.Width:e(window).outerWidth(!1),t.Height?t.Height:e(window).outerHeight(!1),t.MaxWidth?t.MaxWidth:0);0!=u&&e(window).outerWidth(!1)>Number(u.replace("px","").replace("%",""))?e(n).css("max-width",u):e(n).css("max-width",e(window).outerWidth(!1)>e(n).outerWidth()?e(n).outerWidth():e(window).outerWidth(!1)-10);var h=t.MaxHeight?t.MaxHeight:0;0!=h&&e(window).outerHeight(!1)>Number(h.replace("px","").replace("%",""))?e(n).css("max-height",h):e(n).css("height",e(window).outerHeight(!1)>e(n).outerHeight()?e(n).outerHeight():e(window).outerHeight(!1)-10);var v=e(window).outerHeight(!1)>e(n).outerHeight()?(e(window).outerHeight(!1)-e(n).outerHeight())/2:0,w=e(window).outerWidth(!1)>e(n).outerWidth()?(e(window).outerWidth(!1)-e(n).outerWidth())/2:0;e(n).css("top",v+"px"),e(n).css("left",w+"px"),e(o).css("max-height",e(n).outerHeight(!1)-e(i).outerHeight(!1)),t.FullScreen&&e(o).css("min-height",e(n).outerHeight(!1)-e(i).outerHeight(!1))})}},closeWindow:function(t){var n=null;n=e(t?"#"+t:".e-window"),e(n).prev().remove(),e(n).remove(),0==e(".e-window").length&&e("html").css("overflow-y","auto")},showConfirmMessage:function(t){t||(t={}),t.OnConfirm=t.OnConfirm?t.OnConfirm:function(){},t.OnCancel=t.OnCancel?t.OnCancel:function(){};var n=e('<div class="e-overlay">').appendTo("body"),a=e('<div id="e-window">').appendTo("body"),o=e('<div class="e-window-header e-bg-orange">').prependTo(a);e(o).append('<div class="e-window-title">'+t.Title+"</div>");var s=e('<div class="e-window-content e-center">').appendTo(a);e(s).append("<p>"+t.Message+"</>"),e(a).addClass("e-window");var i=e(window).outerHeight(!1)>e(a).outerHeight()?(e(window).outerHeight(!1)-e(a).outerHeight())/2:0,r=e(window).outerWidth(!1)>e(a).outerWidth()?(e(window).outerWidth(!1)-e(a).outerWidth())/2:0;e(a).css("top",i+"px"),e(a).css("left",r+"px"),buttons=e('<div class="e-row e-form-buttons">').appendTo(s),confirm=e('<input type="button" class="e-button e-bg-green" value="Aceptar"/>').appendTo(buttons),cancel=e('<input type="button" class="e-button e-bg-red" value="Cancelar"/>').appendTo(buttons),e(confirm).click(function(){t.OnConfirm(),e(n).remove(),e(a).remove()}),e(cancel).click(function(){t.OnCancel(),e(n).remove(),e(a).remove()})},showMessage:function(t,n){n||(n={}),n.Type=n.Type?n.Type:"None",n.Time=n.Time?n.Time:5e3;var a=null;a=0!=e(".e-messages-box").length?e(".e-messages-box").first():e('<div class="e-messages-box">').appendTo("body");var o=e('<div class="e-message">').appendTo(a);switch(e(o).html(t),n.Type){case"Success":e(o).addClass("e-bg-green");break;case"Danger":e(o).addClass("e-bg-red");break;case"Warning":e(o).addClass("e-bg-yellow");break;case"None":e(o).addClass("e-bg-blue")}e(o).on("click",function(){e(this).remove(),""===a.html()&&e(a).remove()});var s=null;s=setTimeout(function(){e(o).remove(),""===a.html()&&e(a).remove(),clearTimeout(s)},n.Time)},showSuccessMessage:function(e){this.showMessage(e,{Type:"Success"})},showDangerMessage:function(e){this.showMessage(e,{Type:"Danger"})},showWarningMessage:function(e){this.showMessage(e,{Type:"Warning"})},showWait:function(t){t||(t={}),t.Message=t.Message?t.Message:"Espere...",t.Classes=t.Classes?t.Classes:"e-wait-default";var n=null;n=e('<div class="e-wait-box">').appendTo("body");var a=(e('<div class="e-overlay">').insertBefore(n),e('<div class="e-wait-message">').appendTo(n));e(n).addClass(t.Classes),e(a).append('<i class="fa fa-clock-o"></i>'),e(a).append("<span> "+t.Message+"</span>");var o=(e(window).outerHeight(!1)-e(n).outerHeight())/2,s=(e(window).outerWidth(!1)-e(n).outerWidth())/2;e(n).css("top",o),e(n).css("left",s)},closeWait:function(){e(".e-wait-box").prev().remove(),e(".e-wait-box").remove()}}),e.fn.menuBar=function(){var t=e(this),n=e('<div class="e-menu-bar-button"><i class="fa fa-bars"></i></div>').insertAfter(t);n.on("click",function(){t.hasClass("e-menu-bar-open")?(t.removeClass("e-menu-bar-open"),n.css("color","inherit")):(t.addClass("e-menu-bar-open"),n.css("color",t.css("color")))}),t.on("click",".e-item",function(){t.hasClass("e-menu-bar-open")&&t.removeClass("e-menu-bar-open")})},e.fn.menuTab=function(){var t=e(this),n=t.find(".e-menu-tabs .e-active");a(n),t.find(".e-menu-tabs .e-item").on("click",function(){var n=e(this),o=n.attr("data-index");t.find(".e-menu-tabs-content .e-active").removeClass("e-active");var s=t.find(".e-menu-tabs-content .e-item[data-index='"+o+"']").addClass("e-active");e(s).addClass("e-active"),t.find(".e-menu-tabs .e-active").removeClass("e-active"),n.addClass("e-active"),a(n)})},e.fn.table=function(e){return n||(n=new t),e&&(n.el=this,n.options=e,n.render()),n},e.fn.datePicker=function(){function t(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),n=parseInt(t[0],10),a=parseInt(t[1],10),o=parseInt(t[2],10);if(1e3>o||o>3e3||0==a||a>12)return!1;var s=[31,28,31,30,31,30,31,31,30,31,30,31];return(o%400==0||o%100!=0&&o%4==0)&&(s[1]=29),n>0&&n<=s[a-1]}function n(t,n,o,s){e(t).html("");var r=28;1==o||3==o||5==o||7==o||8==o||10==o||12==o?r=31:4==o||6==o||9==o||11==o?r=30:(s%400==0||s%100!=0&&s%4==0)&&(r=29);for(var d=1;r>=d;d++){var l=i(d);d==n?e(t).append('<option value="'+l+'" selected>'+l+"</option>"):e(t).append('<option value="'+l+'">'+l+"</option>")}e(a).val(e(t).val()+"/"+e(h).val()+"/"+e(f).val())}var a=e(this);e(a).css("display","none");var s=e(a).val();s&&t(s)||(s=o());for(var r=s.split("/"),d=parseInt(r[0],10),l=parseInt(r[1],10),c=parseInt(r[2],10),p=e("<div>").insertAfter(a),u=e('<select class="e-select e-date-picker"></select>').appendTo(p),h=e('<select class="e-select e-date-picker e-date-picker-month"></select>').appendTo(p),v=1;12>=v;v++){var w=i(v);v==l?e(h).append('<option value="'+w+'" selected>'+w+"</option>"):e(h).append('<option value="'+w+'">'+w+"</option>")}for(var f=e('<select class="e-select e-date-picker e-date-picker-year"></select>').appendTo(p),v=2e3;2027>=v;v++)v==c?e(f).append('<option value="'+v+'" selected>'+v+"</option>"):e(f).append('<option value="'+v+'">'+v+"</option>");n(u,d,l,c),e(p).on("change","select",function(){n(u,e(u).val(),e(h).val(),e(f).val())})},e.fn.timePicker=function(){var t=e(this);e(t).css("display","none");var n=e(t).val();n&&/^([01]\d|2[0-3]):?([0-5]\d):?([0-5]\d)$/.test(n)||(n=s());for(var a=n.substr(0,2),o=n.substr(3,2),i=e("<div>").insertAfter(t),r=e('<select class="e-select e-time-picker"></select>').appendTo(i),d=0;23>=d;d++)10>d&&(d="0"+d),d==a?e(r).append('<option value="'+d+'" selected>'+d+"</option>"):e(r).append('<option value="'+d+'">'+d+"</option>");e(i).append("<span>:</span>");for(var l=e('<select class="e-select e-time-picker"></select>').appendTo(i),d=0;59>=d;d++)10>d&&(d="0"+d),d==o?e(l).append('<option value="'+d+'" selected>'+d+"</option>"):e(l).append('<option value="'+d+'">'+d+"</option>");e(t).val(e(r).val()+":"+e(l).val()),e(i).on("change","select",function(){e(t).val(e(r).val()+":"+e(l).val())})}}(jQuery),$(document).ready(function(){$.evy()});
